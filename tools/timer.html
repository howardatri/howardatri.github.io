<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>è®¡æ—¶å™¨ Â· howardatri</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../styles.css">
</head>
<body>
<header class="nav">
  <div class="container nav-inner">
    <a class="brand" href="../index.html">howardatri</a>
    <nav class="nav-links">
      <a href="timer.html">è®¡æ—¶å™¨</a>
      <a href="stopwatch.html">ç§’è¡¨</a>
      <a href="countdown.html">æ—¥æœŸå€’è®¡æ—¶</a>
      <a href="../about.html">å…³äº</a>
    </nav>
    <button class="pill" id="themeToggle" aria-label="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
  </div>
</header>

<main class="container tool-wrap">
  <div class="tool-header">
    <div class="tool-title">è®¡æ—¶å™¨</div>
    <div class="tool-controls">
      <input class="tool-input tool-number" id="min" type="number" min="0" value="0">
      <input class="tool-input tool-number" id="sec" type="number" min="0" max="59" value="30">
      <button class="btn" id="start">å¼€å§‹</button>
      <button class="btn ghost" id="pause">æš‚åœ</button>
      <button class="pill" id="reset">é‡ç½®</button>
    </div>
  </div>

  <div class="progress-ring" style="--p:0%">
    <div class="progress-inner">
      <div class="timer-display" id="display">00:30</div>
    </div>
  </div>
</main>

<footer class="footer container">
  <div class="footer-inner">
    <div>Â© 2025 howardatri</div>
    <div class="muted">å·¥å…· Â· è®¡æ—¶å™¨</div>
  </div>
</footer>

<script>
var t=localStorage.getItem('theme');
if(t){document.documentElement.setAttribute('data-theme',t)}
var b=document.getElementById('themeToggle');
function u(){var c=document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark';document.documentElement.setAttribute('data-theme',c);localStorage.setItem('theme',c);b.textContent=c==='dark'?'ğŸŒ™':'â˜€ï¸'}
u();
b.addEventListener('click',u);

var m=document.getElementById('min');
var s=document.getElementById('sec');
var start=document.getElementById('start');
var pause=document.getElementById('pause');
var reset=document.getElementById('reset');
var disp=document.getElementById('display');
var ring=document.querySelector('.progress-ring');
var total=0;var remain=0;var iv=null;var running=false;
function fmt(n){return String(n).padStart(2,'0')}
function render(){var r=Math.max(0,remain);var mm=Math.floor(r/60000);var ss=Math.floor((r%60000)/1000);disp.textContent=fmt(mm)+':'+fmt(ss);var p=total?((total-r)/total)*100:0;ring.style.setProperty('--p',p+'%')}
function tick(){remain-=200;render();if(remain<=0){clearInterval(iv);iv=null;running=false;render();try{var a=new AudioContext();var o=a.createOscillator();o.type='sine';o.frequency.value=880;var g=a.createGain();g.gain.value=0.08;o.connect(g);g.connect(a.destination);o.start();setTimeout(function(){o.stop();a.close()},500)}catch(e){}}
}
function begin(){var mm=parseInt(m.value||'0',10);var ss=parseInt(s.value||'0',10);if(isNaN(mm)||isNaN(ss))return;mm=Math.max(0,mm);ss=Math.min(59,Math.max(0,ss));total=mm*60000+ss*1000;remain=total;if(total<=0)return;clearInterval(iv);iv=setInterval(tick,200);running=true;render()}
function pauseFn(){if(iv){clearInterval(iv);iv=null;running=false}}
function resetFn(){clearInterval(iv);iv=null;running=false;remain=0;render()}
start.addEventListener('click',begin);
pause.addEventListener('click',pauseFn);
reset.addEventListener('click',resetFn);
render();
</script>
</body>
</html>