<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ç¼–è§£ç  Â· howardatri</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../styles.css">
</head>
<body>
<header class="nav">
  <div class="container nav-inner">
    <a class="brand" href="../index.html">howardatri</a>
    <nav class="nav-links">
      <a href="timer.html">è®¡æ—¶å™¨</a>
      <a href="stopwatch.html">ç§’è¡¨</a>
      <a href="countdown.html">æ—¥æœŸå€’è®¡æ—¶</a>
      <a href="codec.html">ç¼–è§£ç </a>
      <a href="../about.html">å…³äº</a>
    </nav>
    <button class="pill" id="themeToggle" aria-label="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
  </div>
</header>

<main class="container tool-wrap">
  <div class="tool-header">
    <div class="tool-title">Base64 / URL ç¼–è§£ç </div>
    <div class="tool-controls row">
      <select class="tool-input" id="mode">
        <option value="base64">Base64</option>
        <option value="url">URL ç¼–ç </option>
      </select>
      <select class="tool-input" id="dir">
        <option value="encode">ç¼–ç </option>
        <option value="decode">è§£ç </option>
      </select>
      <button class="btn" id="run">æ‰§è¡Œ</button>
      <button class="btn ghost" id="copy">å¤åˆ¶ç»“æœ</button>
      <button class="pill" id="clear">æ¸…ç©º</button>
    </div>
  </div>

  <div class="split">
    <textarea class="tool-area" id="src" placeholder="è¾“å…¥æ–‡æœ¬"></textarea>
    <textarea class="tool-area" id="dst" placeholder="è¾“å‡ºç»“æœ" readonly></textarea>
  </div>
  <div class="small" id="err" style="margin-top:8px"></div>
</main>

<footer class="footer container">
  <div class="footer-inner">
    <div>Â© 2025 howardatri</div>
    <div class="muted">å·¥å…· Â· ç¼–è§£ç </div>
  </div>
</footer>

<script>
var t=localStorage.getItem('theme');
if(t){document.documentElement.setAttribute('data-theme',t)}
var b=document.getElementById('themeToggle');
function u(){var c=document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark';document.documentElement.setAttribute('data-theme',c);localStorage.setItem('theme',c);b.textContent=c==='dark'?'ğŸŒ™':'â˜€ï¸'}
u();
b.addEventListener('click',u);

var mode=document.getElementById('mode');
var dir=document.getElementById('dir');
var run=document.getElementById('run');
var copy=document.getElementById('copy');
var clear=document.getElementById('clear');
var src=document.getElementById('src');
var dst=document.getElementById('dst');
var err=document.getElementById('err');

function load(){mode.value=localStorage.getItem('codec.mode')||'base64';dir.value=localStorage.getItem('codec.dir')||'encode';src.value=localStorage.getItem('codec.src')||''}
function save(){localStorage.setItem('codec.mode',mode.value);localStorage.setItem('codec.dir',dir.value);localStorage.setItem('codec.src',src.value)}

function exec(){err.textContent='';var m=mode.value;var d=dir.value;var text=src.value;try{var out='';if(m==='base64'){if(d==='encode'){out=btoa(unescape(encodeURIComponent(text)))}else{out=decodeURIComponent(escape(atob(text)))}}else{if(d==='encode'){out=encodeURIComponent(text)}else{out=decodeURIComponent(text)}}dst.value=out;save()}catch(e){err.textContent='é”™è¯¯ï¼š'+String(e.message||e)}}
function copyFn(){if(!dst.value)return;navigator.clipboard.writeText(dst.value).then(function(){copy.textContent='å·²å¤åˆ¶';setTimeout(function(){copy.textContent='å¤åˆ¶ç»“æœ'},1200)})}
function clearFn(){src.value='';dst.value='';err.textContent='';save()}

mode.addEventListener('change',exec);dir.addEventListener('change',exec);src.addEventListener('input',save);
run.addEventListener('click',exec);copy.addEventListener('click',copyFn);clear.addEventListener('click',clearFn);
load();
</script>
</body>
</html>

