<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>éšæœºå¯†ç ç”Ÿæˆå™¨ Â· howardatri</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../styles.css">
</head>
<body>
<header class="nav">
  <div class="container nav-inner">
    <a class="brand" href="../index.html">howardatri</a>
    <nav class="nav-links">
      <a href="timer.html">è®¡æ—¶å™¨</a>
      <a href="stopwatch.html">ç§’è¡¨</a>
      <a href="countdown.html">æ—¥æœŸå€’è®¡æ—¶</a>
      <a href="password.html">å¯†ç </a>
      <a href="../about.html">å…³äº</a>
    </nav>
    <button class="pill" id="themeToggle" aria-label="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
  </div>
</header>

<main class="container tool-wrap">
  <div class="tool-header">
    <div class="tool-title">éšæœºå¯†ç ç”Ÿæˆå™¨</div>
    <div class="tool-controls row">
      <label class="tool-check"><input type="checkbox" id="upper"> å¤§å†™</label>
      <label class="tool-check"><input type="checkbox" id="lower"> å°å†™</label>
      <label class="tool-check"><input type="checkbox" id="num"> æ•°å­—</label>
      <label class="tool-check"><input type="checkbox" id="sym"> ç¬¦å·</label>
      <input class="tool-input" id="len" type="number" min="4" max="64" value="16">
      <button class="btn" id="gen">ç”Ÿæˆ</button>
      <button class="btn ghost" id="copy">å¤åˆ¶</button>
    </div>
  </div>

  <input class="tool-input" id="out" readonly placeholder="ç‚¹å‡»ç”Ÿæˆå¯†ç " style="width:100%">
  <div class="meter" style="margin-top:10px"><div class="meter-fill" id="meter" style="--w:0%"></div></div>
  <div class="small" id="hint" style="margin-top:8px">å¼ºåº¦ï¼šå¾…ç”Ÿæˆ</div>
</main>

<footer class="footer container">
  <div class="footer-inner">
    <div>Â© 2025 howardatri</div>
    <div class="muted">å·¥å…· Â· å¯†ç ç”Ÿæˆ</div>
  </div>
</footer>

<script>
var t=localStorage.getItem('theme');
if(t){document.documentElement.setAttribute('data-theme',t)}
var b=document.getElementById('themeToggle');
function u(){var c=document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark';document.documentElement.setAttribute('data-theme',c);localStorage.setItem('theme',c);b.textContent=c==='dark'?'ğŸŒ™':'â˜€ï¸'}
u();
b.addEventListener('click',u);

var upper=document.getElementById('upper');
var lower=document.getElementById('lower');
var num=document.getElementById('num');
var sym=document.getElementById('sym');
var len=document.getElementById('len');
var gen=document.getElementById('gen');
var copy=document.getElementById('copy');
var out=document.getElementById('out');
var meter=document.getElementById('meter');
var hint=document.getElementById('hint');

function load(){upper.checked=localStorage.getItem('pw.upper')!=="0";lower.checked=localStorage.getItem('pw.lower')!=="0";num.checked=localStorage.getItem('pw.num')!=="0";sym.checked=localStorage.getItem('pw.sym')==="1";var L=parseInt(localStorage.getItem('pw.len')||'16',10);if(!isNaN(L))len.value=String(Math.max(4,Math.min(64,L)))}
function save(){localStorage.setItem('pw.upper',upper.checked?"1":"0");localStorage.setItem('pw.lower',lower.checked?"1":"0");localStorage.setItem('pw.num',num.checked?"1":"0");localStorage.setItem('pw.sym',sym.checked?"1":"0");localStorage.setItem('pw.len',String(len.value))}

function rand(n){var a=new Uint32Array(n);crypto.getRandomValues(a);return Array.from(a)}
function pick(set){var r=rand(1)[0];return set[r%set.length]}
function ensure(types){var res=[];types.forEach(function(s){res.push(pick(s))});return res}
function strength(p){var s=0;var L=p.length;if(/[A-Z]/.test(p))s++;if(/[a-z]/.test(p))s++;if(/[0-9]/.test(p))s++;if(/[^\w]/.test(p))s++;var score=Math.min(100,Math.round((L/64)*50 + s*12.5));meter.style.setProperty('--w',score+'%');hint.textContent='å¼ºåº¦ï¼š'+(score<40?'å¼±':score<70?'ä¸­':'å¼º')+' ('+score+'%)'}
function build(){save();var sets=[];if(upper.checked)sets.push('ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split(''));if(lower.checked)sets.push('abcdefghijklmnopqrstuvwxyz'.split(''));if(num.checked)sets.push('0123456789'.split(''));if(sym.checked)sets.push('!@#$%^&*()-_=+[]{};:,./?'.split(''));var L=parseInt(len.value||'16',10);if(sets.length===0){out.value='è¯·è‡³å°‘é€‰æ‹©ä¸€ç§å­—ç¬¦é›†';meter.style.setProperty('--w','0%');hint.textContent='å¼ºåº¦ï¼šä¸å¯ç”¨';return}var all=sets.flat();var base=ensure(sets);var remain=L-base.length;var r=rand(remain);for(var i=0;i<remain;i++){base.push(all[r[i]%all.length])}
var sh=rand(base.length);var pw=base.map(function(_,i){return base[sh[i]%base.length]}).join('');out.value=pw;strength(pw)}
function copyFn(){if(!out.value)return;navigator.clipboard.writeText(out.value).then(function(){copy.textContent='å·²å¤åˆ¶';setTimeout(function(){copy.textContent='å¤åˆ¶'},1200)})}

upper.addEventListener('change',save);lower.addEventListener('change',save);num.addEventListener('change',save);sym.addEventListener('change',save);len.addEventListener('input',save);
gen.addEventListener('click',build);copy.addEventListener('click',copyFn);
load();
</script>
</body>
</html>

